<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PhaseSentinel - AI-Powered Profiler</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <nav class="navbar">
        <div class="nav-content">
            <div class="logo">‚ö° PhaseSentinel</div>
            <ul class="nav-links">
                <li><a href="/" class="active">Home</a></li>
                <li><a href="/dashboard">Dashboard</a></li>
                <li><a href="/results">Results</a></li>
            </ul>
        </div>
    </nav>

    <div class="hero">
        <div class="hero-content">
            <h1 class="hero-title">PhaseSentinel</h1>
            <p class="hero-subtitle">AI-Powered Program Profiler & Optimization Engine</p>
            <p class="hero-description">Real-time phase detection, deadlock analysis, and ML-driven recommendations</p>
            
            <form id="quickProfileForm" class="hero-form">
                <div class="form-group">
                    <input 
                        type="number" 
                        id="duration" 
                        name="duration" 
                        value="10" 
                        min="1" 
                        max="300"
                        placeholder="Duration (seconds)"
                    >
                </div>
                <button type="submit" class="btn btn-primary btn-large">
                    Start Profiling
                </button>
            </form>
            
            <div id="heroMessage"></div>
        </div>
    </div>

    <section class="features">
        <div class="container">
            <h2 class="section-title">Key Features</h2>
            <div class="feature-grid">
                <div class="feature-card">
                    <div class="feature-icon">üìä</div>
                    <h3>Phase Detection</h3>
                    <p>Rule-based segmentation into CPU-bound, I/O-bound, memory-bound phases</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üîç</div>
                    <h3>Anomaly Detection</h3>
                    <p>ML-powered security anomaly detection with configurable thresholds</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üîó</div>
                    <h3>Deadlock Analysis</h3>
                    <p>Detect deadlock risks via wait-for graph cycle detection</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">‚öôÔ∏è</div>
                    <h3>Optimization</h3>
                    <p>Predictive recommendations with estimated speedup gains</p>
                </div>
            </div>
        </div>
    </section>

    <footer class="footer">
        <p>&copy; 2024 PhaseSentinel. Profiling made intelligent.</p>
    </footer>

    <script>
        document.getElementById('quickProfileForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            const duration = parseInt(document.getElementById('duration').value);
            const msg = document.getElementById('heroMessage');
            
            if (duration < 1 || duration > 300) {
                msg.innerHTML = '<div class="alert alert-error">Duration must be 1-300 seconds</div>';
                return;
            }
            
            msg.innerHTML = '<div class="alert alert-info">Starting profiling...</div>';
            
            try {
                const response = await fetch('/api/profile', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ duration })
                });
                
                if (response.ok) {
                    const data = await response.json();
                    window.location.href = `/results/${data.id}`;
                } else {
                    const error = await response.json();
                    msg.innerHTML = `<div class="alert alert-error">${error.error}</div>`;
                }
            } catch (e) {
                msg.innerHTML = `<div class="alert alert-error">Error: ${e.message}</div>`;

